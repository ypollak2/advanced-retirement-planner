<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copy-Paste Test for Production</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        h1 {
            color: #333;
            margin: 0 0 20px 0;
        }
        .step {
            border: 2px solid #007bff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .step-number {
            background: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        .copy-block {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            position: relative;
            cursor: pointer;
        }
        .copy-block:hover {
            background: #e9ecef;
        }
        .copy-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .copy-btn:hover {
            background: #218838;
        }
        .critical {
            background: #dc3545;
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
        .success {
            background: #28a745;
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 10px 10px 0;
        }
        button:hover {
            background: #0056b3;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Quick Copy-Paste Test</h1>
        <p>This test uses browser console commands to quickly test the financial health scoring.</p>
        
        <button onclick="window.open('https://ypollak2.github.io/advanced-retirement-planner/', '_blank')">
            Open Production App
        </button>
    </div>

    <div class="container">
        <div class="instructions">
            <h3>üìã Instructions:</h3>
            <ol>
                <li>Open the production app using the button above</li>
                <li>Open browser console (F12 ‚Üí Console tab)</li>
                <li>Copy and paste each command below in order</li>
                <li>Wait for each step to complete before proceeding</li>
            </ol>
        </div>
    </div>

    <div class="container">
        <h2>Console Commands</h2>
        
        <div class="step">
            <div class="step-header">
                <div class="step-number">1</div>
                <h3>Initialize Test Data</h3>
            </div>
            <div class="copy-block" onclick="copyToClipboard(this)">
// Initialize test data for high-income individual
window.testData = {
    planningType: 'individual',
    currentAge: 35,
    retirementAge: 67,
    currentMonthlySalary: 50000,
    currentMonthlyExpenses: 25000,
    currentPension: 500000,
    currentTrainingFund: 300000,
    currentPortfolio: 200000,
    emergencyFund: 150000,
    pensionContributionRate: 18.5,
    trainingFundContributionRate: 10,
    riskTolerance: 'balanced',
    expectedAnnualReturn: 7
};
console.log('‚úÖ Test data loaded. Expected score: 70-90 (NOT 27-29)');
                <button class="copy-btn">Copy</button>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">2</div>
                <h3>Quick Fill Wizard Data</h3>
            </div>
            <div class="copy-block" onclick="copyToClipboard(this)">
// Quick fill wizard with test data
if (window.retirementWizard) {
    // Set all inputs at once
    const inputs = window.retirementWizard.inputs || {};
    Object.assign(inputs, window.testData);
    
    // Update localStorage
    localStorage.setItem('retirementWizardInputs', JSON.stringify(inputs));
    
    // Jump to review step
    window.retirementWizard.currentStep = 9;
    window.retirementWizard.updateUI();
    
    console.log('‚úÖ Data filled. Now at review step.');
} else {
    console.error('‚ùå Wizard not initialized. Please start the wizard first.');
}
                <button class="copy-btn">Copy</button>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">3</div>
                <h3>Calculate Score Directly</h3>
            </div>
            <div class="copy-block" onclick="copyToClipboard(this)">
// Calculate financial health score directly
if (window.calculateFinancialHealthScore) {
    const result = window.calculateFinancialHealthScore(window.testData, {
        combinePartners: false,
        debugMode: true
    });
    
    console.log('üìä SCORE RESULT:', result.totalScore);
    console.log('Expected: 70-90');
    
    if (result.totalScore >= 27 && result.totalScore <= 29) {
        console.error('‚ùå CRITICAL BUG: Score is 27-29!');
    } else if (result.totalScore >= 70 && result.totalScore <= 90) {
        console.log('‚úÖ SUCCESS: Score is in expected range!');
    } else {
        console.warn('‚ö†Ô∏è Score is outside expected range:', result.totalScore);
    }
    
    console.log('Factor scores:', result.factorScores);
} else {
    console.error('‚ùå calculateFinancialHealthScore not found');
}
                <button class="copy-btn">Copy</button>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">4</div>
                <h3>Debug Field Mapping</h3>
            </div>
            <div class="copy-block" onclick="copyToClipboard(this)">
// Debug field mapping issues
console.log('üîç Checking field mappings...');

// Check if field mapping bridge exists
if (window.fieldMappingBridge) {
    const fields = ['currentMonthlySalary', 'currentMonthlyExpenses', 'currentPension', 'emergencyFund'];
    fields.forEach(field => {
        const value = window.fieldMappingBridge.findFieldValue(window.testData, field);
        console.log(`${field}: ${value !== undefined ? '‚úÖ Found (' + value + ')' : '‚ùå Not found'}`);
    });
} else {
    console.error('‚ùå Field mapping bridge not found');
}

// Check wizard data persistence
const savedData = localStorage.getItem('retirementWizardInputs');
if (savedData) {
    const parsed = JSON.parse(savedData);
    console.log('üì¶ Saved wizard data:', parsed);
} else {
    console.log('‚ùå No saved wizard data found');
}
                <button class="copy-btn">Copy</button>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>Expected Results</h2>
        <div class="success">
            ‚úÖ Good Result: Score between 70-90
        </div>
        <div class="critical">
            ‚ùå Bug Detected: Score between 27-29
        </div>
        
        <h3>What to Report:</h3>
        <ul>
            <li>The final score you received</li>
            <li>Which command failed (if any)</li>
            <li>Any error messages in the console</li>
            <li>Whether the field mapping debug showed all fields as found</li>
        </ul>
    </div>

    <script>
        function copyToClipboard(element) {
            const codeBlock = element.cloneNode(true);
            const button = codeBlock.querySelector('.copy-btn');
            if (button) button.remove();
            
            const text = codeBlock.textContent.trim();
            
            navigator.clipboard.writeText(text).then(() => {
                const btn = element.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = '#28a745';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#28a745';
                }, 2000);
            }).catch(err => {
                alert('Failed to copy. Please select and copy manually.');
            });
        }
    </script>
</body>
</html>